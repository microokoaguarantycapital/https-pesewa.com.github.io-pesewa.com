<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disputes - Pesewa Micro-Lending</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #2E8B57;
            --secondary-color: #FFD700;
        }
        .dispute-card {
            border-radius: 12px;
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            margin-bottom: 20px;
        }
        .dispute-card:hover {
            transform: translateY(-3px);
        }
        .dispute-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-open { background: #fff3cd; color: #856404; }
        .status-investigation { background: #cce5ff; color: #004085; }
        .status-resolved { background: #d4edda; color: #155724; }
        .status-escalated { background: #f8d7da; color: #721c24; }
        .status-mediation { background: #d1ecf1; color: #0c5460; }
        .evidence-preview {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        .evidence-preview:hover {
            border-color: var(--primary-color);
            background: #f8fff9;
        }
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e9ecef;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary-color);
            border: 2px solid white;
        }
        .chat-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 10px;
        }
        .chat-bubble.you {
            background: var(--primary-color);
            color: white;
            margin-left: auto;
        }
        .chat-bubble.other {
            background: #f1f3f5;
            color: #212529;
        }
        .dispute-severity {
            width: 8px;
            height: 100%;
            border-radius: 4px 0 0 4px;
            position: absolute;
            left: 0;
            top: 0;
        }
        .severity-low { background: #20c997; }
        .severity-medium { background: #ffc107; }
        .severity-high { background: #fd7e14; }
        .severity-critical { background: #dc3545; }
        .arbitration-badge {
            background: linear-gradient(135deg, #6f42c1 0%, #59359a 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse" style="background: linear-gradient(180deg, #1E5631 0%, #2E8B57 100%); color: white;">
                <div class="position-sticky pt-3">
                    <div class="d-flex align-items-center mb-4 px-3">
                        <img src="https://via.placeholder.com/40x40" alt="Logo" class="me-2">
                        <h5 class="mb-0">Pesewa</h5>
                    </div>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">
                                <i class="bi bi-speedometer2 me-2"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="profile.html">
                                <i class="bi bi-person me-2"></i>
                                Profile
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="analytics.html">
                                <i class="bi bi-graph-up me-2"></i>
                                Analytics
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="dispute.html">
                                <i class="bi bi-shield-exclamation me-2"></i>
                                Disputes
                                <span class="badge bg-danger float-end">3</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="emergency-contact.html">
                                <i class="bi bi-telephone me-2"></i>
                                Emergency
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="transaction.html">
                                <i class="bi bi-arrow-left-right me-2"></i>
                                Transactions
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="documentation-upload.html">
                                <i class="bi bi-cloud-arrow-up me-2"></i>
                                Documents
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3">Dispute Resolution Center</h2>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#newDisputeModal">
                        <i class="bi bi-plus-circle me-2"></i>File New Dispute
                    </button>
                </div>

                <!-- Dispute Statistics -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="bg-danger bg-opacity-25 p-3 rounded-circle me-3">
                                        <i class="bi bi-exclamation-triangle text-danger"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-muted mb-0">Active Disputes</h6>
                                        <h4 class="mb-0">3</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="bg-warning bg-opacity-25 p-3 rounded-circle me-3">
                                        <i class="bi bi-clock-history text-warning"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-muted mb-0">Under Review</h6>
                                        <h4 class="mb-0">2</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="bg-success bg-opacity-25 p-3 rounded-circle me-3">
                                        <i class="bi bi-check-circle text-success"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-muted mb-0">Resolved</h6>
                                        <h4 class="mb-0">8</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card border-0 bg-light">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="bg-info bg-opacity-25 p-3 rounded-circle me-3">
                                        <i class="bi bi-percent text-info"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-muted mb-0">Success Rate</h6>
                                        <h4 class="mb-0">72%</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dispute Filter Tabs -->
                <div class="card mb-4">
                    <div class="card-body">
                        <ul class="nav nav-pills">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" data-filter="all">All Disputes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-filter="open">Open</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-filter="investigation">Investigation</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-filter="mediation">Mediation</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-filter="resolved">Resolved</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Active Disputes -->
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Dispute 1 - Critical -->
                        <div class="card dispute-card" data-status="open">
                            <div class="position-relative">
                                <div class="dispute-severity severity-critical"></div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title mb-1">Dispute #DP-2024-015</h5>
                                            <p class="text-muted small mb-2">Loan LN-2024-003 • Yaw Boateng</p>
                                            <span class="dispute-status status-open">Open</span>
                                            <span class="badge bg-danger ms-2">Critical</span>
                                            <span class="arbitration-badge ms-2">Arbitration Required</span>
                                        </div>
                                        <div class="text-end">
                                            <h4 class="text-danger mb-1">¢3,450</h4>
                                            <small class="text-muted">Amount in Dispute</small>
                                        </div>
                                    </div>
                                    
                                    <p class="card-text mb-3">Loan default dispute. Borrower claims inability to pay due to medical emergency, lender disputes the validity of claims.</p>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <small class="text-muted d-block">Filed Date</small>
                                            <strong>May 15, 2024</strong>
                                        </div>
                                        <div class="col-md-6">
                                            <small class="text-muted d-block">Last Updated</small>
                                            <strong>May 28, 2024</strong>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <small class="text-muted">Parties:</small>
                                            <div class="d-flex align-items-center mt-1">
                                                <img src="https://via.placeholder.com/32" class="rounded-circle me-2" alt="You">
                                                <small class="fw-bold">You (Lender)</small>
                                                <i class="bi bi-arrow-left-right mx-2 text-muted"></i>
                                                <img src="https://via.placeholder.com/32" class="rounded-circle me-2" alt="Borrower">
                                                <small>Yaw Boateng (Borrower)</small>
                                            </div>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-sm btn-outline-primary" onclick="viewDisputeDetails()">View Details</button>
                                            <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#escalateModal">Escalate</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dispute 2 - Medium -->
                        <div class="card dispute-card" data-status="investigation">
                            <div class="position-relative">
                                <div class="dispute-severity severity-medium"></div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title mb-1">Dispute #DP-2024-014</h5>
                                            <p class="text-muted small mb-2">Group Contribution • Adenta Market Traders</p>
                                            <span class="dispute-status status-investigation">Under Investigation</span>
                                            <span class="badge bg-warning ms-2">Medium</span>
                                        </div>
                                        <div class="text-end">
                                            <h4 class="text-warning mb-1">¢1,000</h4>
                                            <small class="text-muted">Amount in Dispute</small>
                                        </div>
                                    </div>
                                    
                                    <p class="card-text mb-3">Disputed group contribution payment. Member claims payment was made but not recorded.</p>
                                    
                                    <div class="progress mb-3" style="height: 6px;">
                                        <div class="progress-bar bg-warning" style="width: 60%"></div>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <small class="text-muted">Investigation Progress: 60%</small>
                                        </div>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary" onclick="viewDisputeDetails()">View Details</button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#uploadEvidenceModal">Add Evidence</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dispute 3 - Low -->
                        <div class="card dispute-card" data-status="mediation">
                            <div class="position-relative">
                                <div class="dispute-severity severity-low"></div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <div>
                                            <h5 class="card-title mb-1">Dispute #DP-2024-013</h5>
                                            <p class="text-muted small mb-2">Interest Calculation • Ama Serwaa</p>
                                            <span class="dispute-status status-mediation">Mediation</span>
                                            <span class="badge bg-success ms-2">Low</span>
                                        </div>
                                        <div class="text-end">
                                            <h4 class="text-success mb-1">¢240</h4>
                                            <small class="text-muted">Amount in Dispute</small>
                                        </div>
                                    </div>
                                    
                                    <p class="card-text mb-3">Dispute over interest calculation discrepancy. Both parties agree to mediation.</p>
                                    
                                    <div class="alert alert-info mb-3 py-2">
                                        <i class="bi bi-info-circle me-1"></i>
                                        <small>Mediation scheduled: June 5, 2024 at 2:00 PM</small>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="Mediator">
                                            <div>
                                                <small class="text-muted d-block">Assigned Mediator</small>
                                                <strong>Kwame Asante</strong>
                                            </div>
                                        </div>
                                        <button class="btn btn-sm btn-success" onclick="joinMediation()">Join Mediation</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dispute Details & Communication -->
                    <div class="col-lg-4">
                        <!-- Dispute Statistics -->
                        <div class="card dispute-card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Dispute Resolution Stats</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Average Resolution Time</small>
                                        <small>18 days</small>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar bg-info" style="width: 70%"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Mediation Success Rate</small>
                                        <small>85%</small>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar bg-success" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Arbitration Required</small>
                                        <small>15%</small>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar bg-warning" style="width: 15%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Communication Timeline -->
                        <div class="card dispute-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Recent Activity</h5>
                                <button class="btn btn-sm btn-outline-primary" onclick="showFullTimeline()">View All</button>
                            </div>
                            <div class="card-body">
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <small class="text-muted">Today, 10:30 AM</small>
                                        <div>New evidence uploaded by you</div>
                                    </div>
                                    <div class="timeline-item">
                                        <small class="text-muted">Yesterday, 3:45 PM</small>
                                        <div>Mediator assigned: Kwame Asante</div>
                                    </div>
                                    <div class="timeline-item">
                                        <small class="text-muted">May 28, 2024</small>
                                        <div>Dispute status changed to "Investigation"</div>
                                    </div>
                                    <div class="timeline-item">
                                        <small class="text-muted">May 25, 2024</small>
                                        <div>Initial response from borrower received</div>
                                    </div>
                                    <div class="timeline-item">
                                        <small class="text-muted">May 15, 2024</small>
                                        <div>Dispute filed by you</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="card dispute-card mt-4">
                            <div class="card-body">
                                <h6 class="mb-3">Quick Actions</h6>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#uploadEvidenceModal">
                                        <i class="bi bi-upload me-2"></i>Upload Evidence
                                    </button>
                                    <button class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#mediationRequestModal">
                                        <i class="bi bi-people me-2"></i>Request Mediation
                                    </button>
                                    <button class="btn btn-outline-warning" onclick="contactSupport()">
                                        <i class="bi bi-headset me-2"></i>Contact Support
                                    </button>
                                    <button class="btn btn-outline-info" onclick="viewDisputeGuidelines()">
                                        <i class="bi bi-info-circle me-2"></i>View Guidelines
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Evidence Section -->
                <div class="card dispute-card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">Evidence & Documentation</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="evidence-preview">
                                    <div class="d-flex align-items-center mb-2">
                                        <i class="bi bi-file-earmark-text text-primary fs-4 me-2"></i>
                                        <div>
                                            <h6 class="mb-0">Loan Agreement</h6>
                                            <small class="text-muted">PDF • 2.4 MB</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Uploaded: May 15, 2024</small>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary">View</button>
                                            <button class="btn btn-sm btn-outline-secondary">Download</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="evidence-preview">
                                    <div class="d-flex align-items-center mb-2">
                                        <i class="bi bi-image text-success fs-4 me-2"></i>
                                        <div>
                                            <h6 class="mb-0">Payment Screenshot</h6>
                                            <small class="text-muted">JPG • 1.2 MB</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Uploaded: May 20, 2024</small>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary">View</button>
                                            <button class="btn btn-sm btn-outline-secondary">Download</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="evidence-preview">
                                    <div class="d-flex align-items-center mb-2">
                                        <i class="bi bi-chat-left-text text-warning fs-4 me-2"></i>
                                        <div>
                                            <h6 class="mb-0">Communication Log</h6>
                                            <small class="text-muted">TXT • 0.8 MB</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>Uploaded: May 25, 2024</small>
                                        <div>
                                            <button class="btn btn-sm btn-outline-primary">View</button>
                                            <button class="btn btn-sm btn-outline-secondary">Download</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- New Dispute Modal -->
    <div class="modal fade" id="newDisputeModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">File New Dispute</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="disputeForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Dispute Type</label>
                                <select class="form-select" required>
                                    <option value="">Select type</option>
                                    <option value="loan-default">Loan Default</option>
                                    <option value="payment-dispute">Payment Dispute</option>
                                    <option value="interest-calculation">Interest Calculation</option>
                                    <option value="group-contribution">Group Contribution</option>
                                    <option value="fraud">Fraud</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Related Transaction/Loan</label>
                                <select class="form-select" required>
                                    <option value="">Select transaction</option>
                                    <option value="LN-2024-003">LN-2024-003 (Yaw Boateng)</option>
                                    <option value="GRP-2024-001">GRP-2024-001 (Adenta Market)</option>
                                    <option value="TRX-2024-045">TRX-2024-045 (Ama Serwaa)</option>
                                </select>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label">Amount in Dispute (¢)</label>
                                <input type="number" class="form-control" min="0" step="0.01" required>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label">Dispute Description</label>
                                <textarea class="form-control" rows="4" placeholder="Describe the issue in detail..." required></textarea>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Severity Level</label>
                                <select class="form-select" required>
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                    <option value="critical">Critical</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Preferred Resolution</label>
                                <select class="form-select">
                                    <option value="">Any</option>
                                    <option value="mediation">Mediation</option>
                                    <option value="arbitration">Arbitration</option>
                                    <option value="direct-negotiation">Direct Negotiation</option>
                                </select>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label">Upload Supporting Documents</label>
                                <div class="border rounded p-4 text-center">
                                    <i class="bi bi-cloud-arrow-up fs-1 text-muted d-block mb-2"></i>
                                    <p class="text-muted mb-2">Drag and drop files here or click to browse</p>
                                    <small class="text-muted">Max file size: 25MB • Supported: PDF, JPG, PNG, DOC</small>
                                    <input type="file" class="form-control mt-3" multiple accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="disputeForm" class="btn btn-danger">Submit Dispute</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Evidence Modal -->
    <div class="modal fade" id="uploadEvidenceModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Upload New Evidence</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="evidenceForm">
                        <div class="mb-3">
                            <label class="form-label">Select Dispute</label>
                            <select class="form-select">
                                <option value="DP-2024-015">DP-2024-015 (Critical)</option>
                                <option value="DP-2024-014">DP-2024-014 (Medium)</option>
                                <option value="DP-2024-013">DP-2024-013 (Low)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Evidence Type</label>
                            <select class="form-select">
                                <option value="document">Document</option>
                                <option value="screenshot">Screenshot</option>
                                <option value="audio">Audio Recording</option>
                                <option value="video">Video</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" rows="3" placeholder="Describe what this evidence proves..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Upload File</label>
                            <input type="file" class="form-control" accept=".pdf,.jpg,.jpeg,.png,.mp3,.mp4,.doc,.docx">
                            <small class="text-muted">Maximum file size: 25MB</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="evidenceForm" class="btn btn-success">Upload Evidence</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Escalate Dispute Modal -->
    <div class="modal fade" id="escalateModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Escalate Dispute</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        <strong>Warning:</strong> Escalation may involve additional fees and legal proceedings.
                    </div>
                    <form id="escalateForm">
                        <div class="mb-3">
                            <label class="form-label">Escalation Type</label>
                            <select class="form-select">
                                <option value="arbitration">Formal Arbitration (¢500 fee)</option>
                                <option value="legal">Legal Proceedings</option>
                                <option value="debt-collector">Debt Collector Assignment</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Reason for Escalation</label>
                            <textarea class="form-control" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                <label class="form-check-label" for="agreeTerms">
                                    I understand that escalation may result in additional costs and I agree to the terms
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="escalateForm" class="btn btn-danger">Confirm Escalation</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mediation Request Modal -->
    <div class="modal fade" id="mediationRequestModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Request Mediation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="mediationForm">
                        <div class="mb-3">
                            <label class="form-label">Select Dispute</label>
                            <select class="form-select">
                                <option value="DP-2024-015">DP-2024-015 (Critical)</option>
                                <option value="DP-2024-014">DP-2024-014 (Medium)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Preferred Mediator</label>
                            <select class="form-select">
                                <option value="">Platform Assigned</option>
                                <option value="kwame">Kwame Asante</option>
                                <option value="akua">Akua Mensah</option>
                                <option value="kofi">Kofi Adjei</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Mediation Method</label>
                            <select class="form-select">
                                <option value="virtual">Virtual Meeting</option>
                                <option value="in-person">In-Person Meeting</option>
                                <option value="written">Written Mediation</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Additional Notes</label>
                            <textarea class="form-control" rows="3" placeholder="Any specific requirements or concerns..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="mediationForm" class="btn btn-success">Request Mediation</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Filter disputes by status
        document.querySelectorAll('.nav-pills .nav-link').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active tab
                document.querySelectorAll('.nav-pills .nav-link').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                const disputes = document.querySelectorAll('.dispute-card');
                
                disputes.forEach(dispute => {
                    if (filter === 'all' || dispute.dataset.status === filter) {
                        dispute.style.display = 'block';
                    } else {
                        dispute.style.display = 'none';
                    }
                });
            });
        });

        // Form submission handlers
        document.getElementById('disputeForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Dispute filed successfully! You will receive a confirmation email.');
            const modal = bootstrap.Modal.getInstance(document.getElementById('newDisputeModal'));
            modal.hide();
        });

        document.getElementById('evidenceForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Evidence uploaded successfully!');
            const modal = bootstrap.Modal.getInstance(document.getElementById('uploadEvidenceModal'));
            modal.hide();
        });

        document.getElementById('escalateForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            if (confirm('Are you sure you want to escalate this dispute? This may involve additional fees.')) {
                alert('Dispute escalated successfully!');
                const modal = bootstrap.Modal.getInstance(document.getElementById('escalateModal'));
                modal.hide();
            }
        });

        document.getElementById('mediationForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Mediation request submitted! You will be contacted within 24 hours.');
            const modal = bootstrap.Modal.getInstance(document.getElementById('mediationRequestModal'));
            modal.hide();
        });

        // Action button handlers
        function viewDisputeDetails() {
            alert('Opening dispute details...');
        }

        function joinMediation() {
            alert('Joining mediation session...');
        }

        function contactSupport() {
            alert('Opening support chat...');
        }

        function viewDisputeGuidelines() {
            alert('Opening dispute resolution guidelines...');
        }

        function showFullTimeline() {
            alert('Showing full dispute timeline...');
        }

        // Evidence preview actions
        document.querySelectorAll('.evidence-preview .btn-outline-primary').forEach(btn => {
            btn.addEventListener('click', function() {
                alert('Opening evidence preview...');
            });
        });

        document.querySelectorAll('.evidence-preview .btn-outline-secondary').forEach(btn => {
            btn.addEventListener('click', function() {
                alert('Downloading evidence file...');
            });
        });
    </script>
</body>
</html>